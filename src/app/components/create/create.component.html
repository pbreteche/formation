<form #vForm="ngForm" (submit)="create(vForm)">
  <div>
    <p [hidden]="vName.valid || vName.untouched">Vous devez donner un nom à votre vignoble</p>
    <label for="vineyard[name]">Nom</label>
    <input
      type="text" id="vineyard[name]" name="vineyard[name]"
      [(ngModel)]="newVineyard.name" required
      #vName="ngModel"
    />
  </div>
  <div>
    <label for="vineyard[address]">Adresse</label>
    <input
      type="text" id="vineyard[address]" name="vineyard[address]"
      [(ngModel)]="newVineyard.address" pattern=".{5,}" required
    />
  </div>
  <div>
    <label for="vineyard[area]">Surface</label>
    <input
      type="number" id="vineyard[area]" name="vineyard[area]"
      [(ngModel)]="newVineyard.area"
    />
  </div>
  <div *ngFor="let variety of newVineyard.grapeVarieties; let i = index; trackBy: trackVariety ">
    <label [for]="'vineyard[grapeVarieties][' + i + ']'">Cépage + {{ i }}</label>
    <input
      type="text" [id]="'vineyard[grapeVarieties][' + i + ']'" [name]="'vineyard[grapeVarieties][' + i + ']'"
      [(ngModel)]="newVineyard.grapeVarieties[i]"
    />
  </div>
  <div>
    <label for="vineyard[newVariety]">Nouveau cépage</label>
    <input
      type="text" id="vineyard[newVariety]" name="vineyard[newVariety]"
      [(ngModel)]="newVariety" #varietyInput
    />
    <button type="button" (click)="add()">+</button>
  </div>

  <button [disabled]="vForm.invalid">Créer</button>
</form>
